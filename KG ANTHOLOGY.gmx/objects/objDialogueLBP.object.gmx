<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprBlockMask</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1000000000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>dialogue[0] = "" //set in creation code
dialogue[1] = ""
dialogue[2] = ""
dialogue[3] = ""
dialogue[4] = ""
dialogue[5] = ""
dialogue[6] = ""
dialogue[7] = ""
dialogue[8] = ""
dialogue[9] = ""
dialogueMax = 0 //set in creation code
dialogueIndex = 0

phase = 0
drawArrowScale = 0
drawBar = -2
exitBorder = x-64
drawBubble = -1000
acc = 0

activate = true

wobble_speed = .25*pi/room_speed; //speed of the wobble
wobble_distance = 6; //distance of the wobble
aa=irandom_range(0,360);
bubbleChange = 0

hintTimer = 300
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (activate == true) {

if (phase == 0) {
    if (instance_exists(objPlayer) &amp;&amp; objPlayer.x &gt;= x &amp;&amp; objPlayer.x &lt;= x+32*image_xscale &amp;&amp; objPlayer.y &gt;= y &amp;&amp; objPlayer.y &lt;= y+32*image_yscale) {
        drawArrowScale = lerp(drawArrowScale, 1, .1)
        if (keyboard_check_pressed(global.upButton)) {
        with objDialogueLBP {activate = false}
        activate = true
        phase++
        objPlayer.drink = false
        dialogueIndex = 0
        hintTimer = 300
        audio_play_sound(sndSpeechBubbleOpen, 10, false)
        }
    }
    else
        drawArrowScale = lerp(drawArrowScale, 0, .5)
    drawBar = lerp(drawBar, -2, .2)
    view_wview = lerp(view_wview, 800, .075)
    view_hview = lerp(view_hview, 608, .075)
    view_xview = lerp(view_xview, 0, .075)
    view_yview = lerp(view_yview, 0, .075)
    if (drawBubble &gt; -1000) {
        acc++
        drawBubble -= acc
        if (drawBubble &lt;= -1000)
            acc = 0
    }
}

if (phase == 1) {
    view_wview = lerp(view_wview, 400, .1)
    view_hview = lerp(view_hview, 304, .1)
    view_xview = lerp(view_xview, x-184, .1)
    view_yview = lerp(view_yview, y-200, .1)
    drawBar = lerp(drawBar, 96, .15)
    drawBubble = lerp(drawBubble, 150, .1)
    drawArrowScale = 0
    if (keyboard_check_pressed(global.shootButton)) {
        if (dialogueIndex &lt; dialogueMax) {
            dialogueIndex++
            hintTimer = 300
        }
    }
    
    if (instance_exists(objPlayer) &amp;&amp; (objPlayer.x &lt; exitBorder || objPlayer.x &gt; exitBorder+128 || objPlayer.y &lt; y-64 || objPlayer.y &gt; y+64)) {
        phase = 0
        with objDialogueLBP {activate = true}
        audio_play_sound(sndSpeechBubbleClosed, 10, false)
        }
        
    //hint timer
    if (hintTimer &gt; 0) hintTimer--
    
}

//bob
aa+=wobble_speed;
bubbleChange = wobble_distance*sin(aa);

}

view_xview = clamp(view_xview, 0, 400)
view_yview = clamp(view_yview, 0, 304)


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var line = dialogue[dialogueIndex]

//if (phase == 1)
//    draw_triangle(225, string_height(dialogue[dialogueIndex])+10+drawBubble+(bubbleChange), 275, string_height(dialogue[dialogueIndex])+10+drawBubble+(bubbleChange), x+sprite_width/2, y+sprite_height/2, false)

draw_set_color(c_black) //originally at bottom
draw_rectangle(-2, -2, 802, drawBar, false)
draw_rectangle(-2, 608-drawBar, 802, 610, false)
draw_set_color(c_white) 

draw_set_font(fDefault18)
draw_rectangle(250-(string_width(line)/2)+(16)-(10), drawBubble-16+(bubbleChange), 250+(string_width(line)/2)+(-16)+(10), string_height(line)+16+drawBubble+(bubbleChange), false)

draw_circle(250-(string_width(line)/2)+(16)-10, drawBubble-1+(bubbleChange), 16, false)
draw_circle(250-(string_width(line)/2)+(16)-10, string_height(line)+drawBubble+(bubbleChange), 16, false)
draw_circle(250+(string_width(line)/2)+(-16)+(10), drawBubble-1+(bubbleChange), 16, false)
draw_circle(250+(string_width(line)/2)+(-16)+(10), string_height(line)+drawBubble+(bubbleChange), 16, false)

draw_rectangle(250-(string_width(line)/2)+1-10, drawBubble-1+(bubbleChange), 250+string_width(line)/2+(10), string_height(line)+drawBubble+(bubbleChange), false)

draw_set_halign(fa_center)
draw_set_valign(fa_top)
draw_set_color(c_black)
draw_text(-150+400, drawBubble+(bubbleChange), line)

draw_set_color(c_white)

if (hintTimer &lt; 100) draw_set_alpha(1-(hintTimer/100))
else draw_set_alpha(0)

if (dialogueIndex != dialogueMax &amp;&amp; phase == 1)
    draw_text(400, drawBar-64, "[Shoot To Advance Text]")

else
    draw_text(400, drawBar-64, "[Walk Away To Exit]")
    
draw_set_alpha(1)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (phase == 0)  
    draw_sprite_ext(sprDialoguePrompt, 0, x+sprite_width/2, y-32+(bubbleChange), drawArrowScale, drawArrowScale, 0, c_white, 1)
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
