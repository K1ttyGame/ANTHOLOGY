<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprBlockMask</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-10000000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>message[0] = "PREPARE TO DIE";
message[1] = "WAIT";
message[2] = "WHO ARE YOU";
message[3] = "Huh? You aren't supposed to be here.";
message[4] = "He cannot interfere with our plans...";
message[5] = "to capture the PB!";
message[6] = "Gasp.";
message[7] = "Take him away!";
message[8] = "To the holding chamber!";


message_current = 0; //0 is the first number in our array, and the message we are currently at
message_end = 8; //6 is the last number in our array
message_draw = ""; //this is what we 'write' out. It's blank right now
increase = 0.25; //the speed at which new characters are added
characters = 0; //how many characters have already been drawn
hold = 0; //if we hold 'Z', the text will render faster

message_length = string_length(message[message_current]); //get the number of characters in the first message


depth = -1000000

cutscenePhase = -1
cutsceneTimer = 0
currentlySpeaking = 0
currentSound = 0
currentPitch = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (cutscenePhase == -1) {
    if (instance_exists(objPlayer) &amp;&amp; objPlayer.x &gt;= 192) {
        cutscenePhase++
        instance_create(0, 0, objRestartBlocker)
    }
}

if cutscenePhase == 0 {
    cutsceneTimer += 1
    if cutsceneTimer &gt;= 0 {
        with (objCatCutscene) {image_xscale = lerp (image_xscale, 1, .1);image_yscale = lerp (image_yscale, 1, .1);scrPlayMusic (musMeeting, true)}
    }
    if cutsceneTimer &gt;= 30 {
        with (objHamsterCutscene) {image_xscale = lerp (image_xscale, 1, .1);image_yscale = lerp (image_yscale, 1, .1);}
    }
    if cutsceneTimer &gt;= 60 {
        with (objDogCutscene) {image_xscale = lerp (image_xscale, 1, .1);image_yscale = lerp (image_yscale, 1, .1);}
    }
    switch (cutsceneTimer) {
        case 1:
        case 30:
        case 60:
            audio_play_sound (sndMemberAppear, 10, false)
            break;}
    if cutsceneTimer == 120 {scrSaveGame(true);cutscenePhase+=1}
}

if cutscenePhase == 1 {
    if !instance_exists (objDialogueBox) {instance_create (0, 608, objDialogueBox)}
    objDialogueBox.y = lerp (objDialogueBox.y, 408, .1)
    if objDialogueBox.y &lt;= 410 {cutscenePhase+=1}
}

if cutscenePhase == 2 {
if (characters &lt; message_length) { //if current character count is less than the amount in current message* 
    hold = keyboard_check(global.shootButton) //hold is true or false if we hold 'Z' or not
    characters += increase * (1 + hold); //increase speed based on hold
    message_draw = string_copy(message[message_current], 0, characters); //copy string to current character
    audio_play_sound (currentSound, 10, false)
} 
else { //if current character is more than the amount in the current message
    if keyboard_check_pressed(global.shootButton) { //if we press Z...
        if (message_current &lt; message_end) { //if there are more messages left to show (0 -&gt; 6, in our case)
            message_current += 1; //increase the message by 1
            message_length = string_length(message[message_current]);  //get the new character length for message
            characters = 0; //set the characters back to 0
            message_draw = ""; //clear the drawn text
        }
        else { //if our messages are done (we reach 6, in our case)...
            cutscenePhase++
            audio_play_sound (sndLockedUp, 10, false)
            scrStopMusic(musMeeting)
          }
      }
   

    }
}

if instance_exists (objPlayer) &amp;&amp; cutscenePhase &lt; 3 &amp;&amp; cutscenePhase &gt;= 0 {objPlayer.frozen = true}

if (cutscenePhase == 3) {
    if !audio_is_playing(sndLockedUp) {
        //objPlayer.frozen = false
        with instance_create(x, y, objFadeTransition) {
            roomTo = rHub1
        }
        
        if (global.cheevoFlag[12] == false) { //give beat achievement
            with instance_create(16, 16, objAchievementGet) {
                achievementPortrait = sprAchievement13 //set to a sprite index
                achievementName = "Wait, That's It?" //set to name of achievement
            }
            global.cheevoFlag[12] = true
        }
        cutscenePhase++
    }
}

//if cutscenePhase == 3 {
//    objDialogueBox.y = lerp (objDialogueBox.y, 610, .1)
//    if objDialogueBox.y &gt;= 608 {instance_destroy()}
//}
//keep the player frozen until the text is gone

//change text color and sound based on who is speaking
switch (message_current) {
    case 0:
    case 1:
    case 2:
        currentlySpeaking = c_red
        currentSound = sndHamsterVoice
        break;
    case 4:
    case 5:
        currentlySpeaking = c_blue
        currentSound = sndCatVoice
        break;
    case 3:
    case 7:
    case 8:
        currentlySpeaking = c_lime
        currentSound = sndDogVoice
        break;
    case 6:
        currentlySpeaking = c_white
        currentSound = sndNarrationVoice
        break;
        }

//make the council members dissappear after they finish speaking
if message_current &gt;= 15 {
    with (objCatCutscene) {
        if image_xscale = 1 {audio_play_sound (sndMemberDisappear, 10, false);}
        image_xscale = lerp (image_xscale, -.05, .1)
        image_yscale = lerp (image_yscale, -.05, .1)
        if image_xscale &lt;= 0 {instance_destroy();audio_play_sound (sndMemberDisappear, 10, false);}
        }
    if !instance_exists (objCatCutscene) {with (objDogCutscene) {
        image_xscale = lerp (image_xscale, -.05, .1)
        image_yscale = lerp (image_yscale, -.05, .1)
        if image_xscale &lt;= 0 {instance_destroy();audio_play_sound (sndMemberDisappear, 10, false);}
        }
        }
   if !instance_exists (objCatCutscene) and !instance_exists (objDogCutscene) { with (objHamsterCutscene) {
        if image_xscale = 1 {audio_play_sound (sndMemberDisappear, 10, false);}
        image_xscale = lerp (image_xscale, -.05, .1)
        image_yscale = lerp (image_yscale, -.05, .1)
        if image_xscale &lt;= 0 {instance_destroy();}
        }
        }
    //make the music fade out after the members dissappear
    currentPitch -= .005
    audio_sound_pitch (musMeeting, currentPitch)
    if currentPitch == 0 {audio_stop_sound (musMeeting)}
}


//if scrButtonCheckPressed(global.skipButton) {
//    room_goto_next();
//}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (cutscenePhase &gt;= 3) {
    draw_set_color(c_black)
    draw_rectangle(-1, -1, 800, 608, false)
    draw_set_color(c_white)
    
    draw_set_font(fDefault30)
    draw_text(room_width/2, room_height/2-64, "To Be Continued#in Panasonic Bluray")
    draw_set_font(fDefault18)
    draw_text(room_width/2, room_height/2+32, "Releasing 2/9/2021")
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_font (fDefault18);
draw_set_colour (currentlySpeaking);
draw_set_halign (fa_center);
depth = -52

if (instance_exists(objDialogueBox))
    draw_sprite_ext(sprTextbox, 0, objDialogueBox.x, objDialogueBox.y, 800, 1, 0, c_white, 1)

if cutscenePhase &lt; 3 {
    if message_current == 0 or message_current == 4 or message_current == 11 {
        draw_text(room_width/2+random_range (-2,2), room_height*.8+random_range (-2,2), message_draw)
    }
    else {draw_text(room_width/2, room_height*.8, message_draw)}
    }

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
